<div class="card">
  <h2>Welcome to DecisionAgent Example Application</h2>
  <p>This application demonstrates the <strong>decision_agent</strong> gem with thread-safety, versioning, and real-world use cases.</p>

  <!-- Role Selector & Permissions Info -->
  <div style="background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%); color: white; padding: 20px; border-radius: 12px; margin: 20px 0; box-shadow: 0 5px 15px rgba(25, 118, 210, 0.3);">
    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
      <div>
        <h3 style="margin: 0 0 10px 0; font-size: 1.3em;">ğŸ” Role-Based Access Control (RBAC)</h3>
        <p style="margin: 0; opacity: 0.95;">
          <strong>Current Role:</strong> <%= @current_role&.capitalize || 'Viewer' %>
          <% if RbacUseCase::ROLES[@current_role] %>
            - <%= RbacUseCase::ROLES[@current_role][:description] %>
          <% end %>
        </p>
        <p style="margin: 5px 0 0 0; font-size: 0.9em; opacity: 0.85;">
          Access to features is controlled by your role. Change your role to test different permission levels.
        </p>
      </div>
      <div style="margin-top: 10px;">
        <a href="/demo/role_selector" style="display: inline-block; background: white; color: #1976d2; padding: 12px 30px; border-radius: 8px; text-decoration: none; font-weight: bold; transition: transform 0.3s; box-shadow: 0 3px 10px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
          Change Role â†’
        </a>
      </div>
    </div>
  </div>

  <!-- NEW: Test Center Highlight -->
  <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 12px; margin: 30px 0; text-align: center; box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);">
    <h2 style="margin-bottom: 15px; font-size: 2em;">ğŸ§ª New: Comprehensive Test Center</h2>
    <p style="margin-bottom: 20px; font-size: 1.1em; opacity: 0.95;">Access all DecisionAgent features, test suites, data generation, and monitoring tools in one place!</p>
    <a href="/demo/test_center" style="display: inline-block; background: white; color: #667eea; padding: 15px 40px; border-radius: 8px; text-decoration: none; font-weight: bold; font-size: 1.1em; transition: transform 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-3px)'" onmouseout="this.style.transform='translateY(0)'">
      Launch Test Center â†’
    </a>
  </div>

  <h3 style="margin-top: 30px; margin-bottom: 15px;">ğŸš€ Performance & Testing Tools</h3>

  <div class="grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
    <div class="card" style="border-left: 4px solid #e74c3c;">
      <h3 style="color: #e74c3c; margin-bottom: 10px;">ğŸ“Š Performance Dashboard</h3>
      <p style="margin-bottom: 15px;">Run comprehensive performance tests: single evaluation, batch processing, cache performance, and concurrent scalability.</p>
      <a href="/demo/performance_dashboard" class="btn" style="text-decoration: none; background: #e74c3c;">Launch Dashboard â†’</a>
    </div>

    <div class="card" style="border-left: 4px solid #f39c12;">
      <h3 style="color: #f39c12; margin-bottom: 10px;">ğŸ§µ Threading Visualization</h3>
      <p style="margin-bottom: 15px;">Real-time visualization of multi-threaded execution with performance metrics and latency analysis.</p>
      <a href="/demo/threading_visualization" class="btn" style="text-decoration: none; background: #f39c12;">View Threads â†’</a>
    </div>

    <div class="card" style="border-left: 4px solid #16a085;">
      <h3 style="color: #16a085; margin-bottom: 10px;">ğŸ“š All Use Cases</h3>
      <p style="margin-bottom: 15px;">Explore 9 real-world use case examples from fraud detection to content moderation.</p>
      <a href="/demo/all_use_cases" class="btn" style="text-decoration: none; background: #16a085;">Explore â†’</a>
    </div>
  </div>

  <h3 style="margin-top: 40px; margin-bottom: 15px;">ğŸ”¬ Advanced Features (NEW!)</h3>

  <div class="grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
    <div class="card" style="border-left: 4px solid #f39c12; background: linear-gradient(135deg, #fff9e6 0%, #ffffff 100%);">
      <h3 style="color: #f39c12; margin-bottom: 10px;">ğŸ†• Advanced Operators</h3>
      <p style="margin-bottom: 15px;">Test new operators: string operations, collections, statistics, date/time, geospatial, and more!</p>
      <a href="/demo/advanced_operators" class="btn" style="text-decoration: none; background: #f39c12; color: white;">Try Operators â†’</a>
    </div>
    
    <div class="card" style="border-left: 4px solid #667eea; background: linear-gradient(135deg, #f5f7ff 0%, #ffffff 100%);">
      <h3 style="color: #667eea; margin-bottom: 10px;">ğŸ§ª A/B Testing</h3>
      <p style="margin-bottom: 15px;">Compare different rule versions with statistical significance analysis. Test champion vs challenger variants.</p>
      <a href="/demo/ab_testing" class="btn" style="text-decoration: none; background: #667eea;">Explore â†’</a>
    </div>

    <div class="card" style="border-left: 4px solid #764ba2; background: linear-gradient(135deg, #f9f5ff 0%, #ffffff 100%);">
      <h3 style="color: #764ba2; margin-bottom: 10px;">ğŸ’¾ Persistent Monitoring</h3>
      <p style="margin-bottom: 15px;">Database-backed metrics storage with historical analysis, custom queries, and cleanup policies.</p>
      <a href="/demo/persistent_monitoring" class="btn" style="text-decoration: none; background: #764ba2;">Explore â†’</a>
    </div>
  </div>

  <h3 style="margin-top: 40px; margin-bottom: 15px;">ğŸ’¼ Interactive Examples</h3>

  <div class="grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
    <div class="card" style="border-left: 4px solid #27ae60;">
      <h3 style="color: #27ae60; margin-bottom: 10px;">Loan Approval</h3>
      <p style="margin-bottom: 15px;">Evaluate loan applications with multiple approval tiers based on credit score, income, and debt ratio.</p>
      <a href="/demo/loan_approval" class="btn" style="text-decoration: none; background: #27ae60;">Try It â†’</a>
    </div>

    <div class="card" style="border-left: 4px solid #e67e22;">
      <h3 style="color: #e67e22; margin-bottom: 10px;">Discount Engine</h3>
      <p style="margin-bottom: 15px;">Calculate optimal discounts based on customer tier, cart value, and promotional campaigns.</p>
      <a href="/demo/discount_engine" class="btn" style="text-decoration: none; background: #e67e22;">Try It â†’</a>
    </div>

    <div class="card" style="border-left: 4px solid #c0392b;">
      <h3 style="color: #c0392b; margin-bottom: 10px;">Fraud Detection</h3>
      <p style="margin-bottom: 15px;">Real-time transaction risk assessment with multi-level threat detection.</p>
      <a href="/demo/fraud_detection" class="btn" style="text-decoration: none; background: #c0392b;">Try It â†’</a>
    </div>

    <div class="card" style="border-left: 4px solid #3498db;">
      <h3 style="color: #3498db; margin-bottom: 10px;">Custom Evaluator</h3>
      <p style="margin-bottom: 15px;">Test any rule with custom context data using JSON input.</p>
      <a href="/demo/custom_evaluate" class="btn" style="text-decoration: none; background: #3498db;">Try It â†’</a>
    </div>

    <div class="card" style="border-left: 4px solid #9b59b6;">
      <h3 style="color: #9b59b6; margin-bottom: 10px;">View Rules</h3>
      <p style="margin-bottom: 15px;">Browse all rules, versions, and their configurations stored in the database.</p>
      <a href="/demo/rules" class="btn" style="text-decoration: none; background: #9b59b6;">View â†’</a>
    </div>
  </div>

  <h3 style="margin-top: 40px; margin-bottom: 15px;">ğŸ”Œ Authorization Adapters (NEW!)</h3>
  <p style="margin-bottom: 20px; color: #666;">Examples demonstrating how to integrate DecisionAgent with popular authentication and authorization libraries.</p>

  <div class="grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
    <div class="card" style="border-left: 4px solid #8e44ad; background: linear-gradient(135deg, #f9f5ff 0%, #ffffff 100%);">
      <h3 style="color: #8e44ad; margin-bottom: 10px;">ğŸ” Pundit Adapter</h3>
      <p style="margin-bottom: 15px;">Integrate DecisionAgent with Pundit authorization. See how Pundit policies use DecisionAgent rules for access control.</p>
      <a href="/demo/pundit_adapter" class="btn" style="text-decoration: none; background: #8e44ad; color: white;">Test Adapter â†’</a>
    </div>

    <div class="card" style="border-left: 4px solid #16a085; background: linear-gradient(135deg, #e8f8f5 0%, #ffffff 100%);">
      <h3 style="color: #16a085; margin-bottom: 10px;">ğŸ”‘ Devise + CanCanCan</h3>
      <p style="margin-bottom: 15px;">Combine Devise authentication with CanCanCan authorization using DecisionAgent rules for ability checks.</p>
      <a href="/demo/devise_cancancan_adapter" class="btn" style="text-decoration: none; background: #16a085; color: white;">Test Adapter â†’</a>
    </div>

    <div class="card" style="border-left: 4px solid #2980b9; background: linear-gradient(135deg, #e3f2fd 0%, #ffffff 100%);">
      <h3 style="color: #2980b9; margin-bottom: 10px;">âš™ï¸ Default Adapter</h3>
      <p style="margin-bottom: 15px;">Use DecisionAgent's built-in RBAC adapter without external dependencies. Simple and straightforward.</p>
      <a href="/demo/default_adapter" class="btn" style="text-decoration: none; background: #2980b9; color: white;">Test Adapter â†’</a>
    </div>

    <div class="card" style="border-left: 4px solid #e74c3c; background: linear-gradient(135deg, #fdeaea 0%, #ffffff 100%);">
      <h3 style="color: #e74c3c; margin-bottom: 10px;">ğŸ› ï¸ Custom Adapter</h3>
      <p style="margin-bottom: 15px;">Build your own custom adapter with security clearance, team membership, and custom permissions.</p>
      <a href="/demo/custom_adapter" class="btn" style="text-decoration: none; background: #e74c3c; color: white;">Test Adapter â†’</a>
    </div>
  </div>

  <h3 style="margin-top: 40px; margin-bottom: 15px;">âš¡ Command-Line Tools</h3>
  <div class="card" style="background: #2c3e50; color: white; padding: 20px;">
    <h4 style="margin-bottom: 15px;">Available Rake Tasks:</h4>
    <pre style="background: #34495e; padding: 15px; border-radius: 5px; overflow-x: auto;"><code># Performance Benchmarks
rake performance:benchmark              # Comprehensive performance suite
rake performance:memory_profile         # Memory usage analysis
rake performance:compare_use_cases      # Compare all use cases

# Load Testing
rake load_test:run[scenario,duration,threads]  # Configurable load test
rake load_test:stress_test              # Find breaking point
rake load_test:endurance[duration]      # Long-running stability test

# Examples:
rake load_test:run[medium,60,4]         # Medium scenario, 60s, 4 threads
rake load_test:stress_test               # Auto-scaling stress test
rake load_test:endurance[10]            # 10-minute endurance test</code></pre>
  </div>

  <h3 style="margin-top: 40px; margin-bottom: 15px;">âœ¨ Features</h3>
  <ul style="list-style: none; padding: 0;">
    <li style="padding: 10px; background: #f8f9fa; margin-bottom: 5px; border-radius: 4px;">âœ“ Thread-safe decision service with Singleton pattern</li>
    <li style="padding: 10px; background: #f8f9fa; margin-bottom: 5px; border-radius: 4px;">âœ“ Rule versioning with rollback capability</li>
    <li style="padding: 10px; background: #f8f9fa; margin-bottom: 5px; border-radius: 4px;">âœ“ JSON-based rule definitions</li>
    <li style="padding: 10px; background: #f8f9fa; margin-bottom: 5px; border-radius: 4px;">âœ“ Batch evaluation with parallel processing</li>
    <li style="padding: 10px; background: #f8f9fa; margin-bottom: 5px; border-radius: 4px;">âœ“ Built-in caching for performance</li>
    <li style="padding: 10px; background: #f8f9fa; margin-bottom: 5px; border-radius: 4px;">âœ“ Real-time threading visualization</li>
    <li style="padding: 10px; background: #f8f9fa; margin-bottom: 5px; border-radius: 4px;">âœ“ Comprehensive performance benchmarking</li>
    <li style="padding: 10px; background: #f8f9fa; margin-bottom: 5px; border-radius: 4px;">âœ“ Load testing with multiple scenarios</li>
    <li style="padding: 10px; background: #f8f9fa; margin-bottom: 5px; border-radius: 4px;">âœ“ 9 real-world use case examples</li>
    <li style="padding: 10px; background: #e6e9ff; margin-bottom: 5px; border-radius: 4px; border-left: 3px solid #667eea;"><strong>NEW:</strong> A/B Testing with statistical analysis</li>
    <li style="padding: 10px; background: #f9f5ff; margin-bottom: 5px; border-radius: 4px; border-left: 3px solid #764ba2;"><strong>NEW:</strong> Persistent database monitoring</li>
    <li style="padding: 10px; background: #e3f2fd; margin-bottom: 5px; border-radius: 4px; border-left: 3px solid #1976d2;"><strong>NEW:</strong> Role-Based Access Control (RBAC) with permission testing</li>
  </ul>

  <div style="margin-top: 30px; padding: 20px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 5px;">
    <h3 style="margin-top: 0; color: #856404;">âš ï¸ Permission Notice</h3>
    <p style="color: #856404; margin-bottom: 0;">
      The DecisionAgent Web UI at <code>/decision_agent</code> and various features now require appropriate permissions based on your role. 
      Use the role selector above to test different permission levels. Default role is <strong>viewer</strong> (limited access).
    </p>
  </div>
</div>
